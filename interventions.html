<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tristan Arbona</title>
  <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />

  <!-- Script Plausible -->
  <script defer data-domain="tristan-arbona.corpusdigitalis.com" src="https://stats.corpusdigitalis.com/js/script.file-downloads.hash.outbound-links.pageview-props.tagged-events.js"></script>

  <style>
    body {
      font-family: 'Alata', sans-serif;
      margin: 0;
      background: #fff;
      color: #222;
    }

    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }

    .main-content {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .main-content img {
      width: 150px;
      border-radius: 50%;
    }

    .description {
      flex: 1;
    }

    h1, h2 {
      text-align: center;
    }

    /* Zone de filtres */
    #tools-box {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
      margin: 30px 0;
      padding: 10px 0;
      position: relative;
    }

    #tools-box input, #tools-box button {
      font-family: inherit;
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    #searchInput {
      flex: 1;
      max-width: 300px;
    }

    #dateFilter {
      display: flex;
      gap: 10px;
    }

    /* Sticky au scroll */
    #tools-box.sticky {
      position: fixed;
      top: 70px; /* juste sous le header */
      left: 0;
      right: 0;
      background: #fff;
      padding: 12px 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 1000;
    }

    /* Timeline */
    .timeline {
      position: relative;
      margin: 60px 0;
      padding: 20px 0;
    }

    /* Ligne centrale */
    #timeline-line {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      background: linear-gradient(to bottom, rgba(0,0,0,0), #000 80%);
      margin-top: 100px; /* dégradé avant premier event */
    }

    /* Événements */
    .event {
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      margin: 40px 0;
    }

    .event.left {
      flex-direction: row-reverse;
    }

    .event-content {
      width: 40%;
      padding: 15px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      text-align: center;
    }

    /* Points */
    .event::before {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 14px;
      height: 14px;
      background: #000;
      border-radius: 50%;
      z-index: 1;
      top: 50%; /* CENTRÉ par rapport à la box */
      transform: translate(-50%, -50%);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .main-content {
        flex-direction: column;
        text-align: center;
      }

      #tools-box {
        flex-direction: column;
        align-items: stretch;
      }

      #dateFilter {
        justify-content: center;
      }

      .event {
        flex-direction: column !important;
      }

      .event-content {
        width: 80%;
      }

      #timeline-line {
        left: 20px;
        transform: none;
      }

      .event::before {
        left: 20px;
      }
    }

    /* Highlight recherche */
    mark {
      background: yellow;
      color: black;
      font-weight: bold;
    }

    /* Marge bas */
    .timeline::after {
      content: "";
      display: block;
      height: 150px;
    }
  </style>
</head>
<body style="outline: none;">

  <!-- Header dynamique -->
  <div id="header-placeholder"></div>

  <div class="container">
    <div class="main-content">
      <img src="portrait.jpg" alt="Portrait de Tristan Arbona" />
      <div class="description">
        <h1 id="titre-accueil">Bienvenue</h1>
        <p id="texte-description">
          Je conçois des sites web professionnels sur mesure, pensés pour valoriser l’identité, les différents travaux et l’expertise de professionnels issus de divers secteurs.<br><br>
          Chaque site est développé de manière personnalisée, avec une attention portée à la lisibilité, à la simplicité d’usage et à l’autonomie du client.
        </p>
      </div>
    </div>

    <!-- Zone filtres -->
    <div id="tools-box">
      <input type="text" id="searchInput" placeholder="Rechercher un mot-clé...">
      <div id="dateFilter">
        <input type="date" id="startDate">
        <input type="date" id="endDate">
        <button onclick="resetFilters()">Reset</button>
      </div>
    </div>

    <!-- Timeline -->
    <div class="timeline">
      <div id="timeline-line"></div>

      <!-- 10 événements fictifs réalistes -->
      <div class="event left">
        <div class="event-content" data-date="2025-08-10">
          <h2 id="event-type-1">Colloque</h2>
          <p id="event-desc-1">Présentation sur l’intelligence artificielle appliquée à l’éducation.</p>
          <p id="event-lieu-1"><strong>Paris</strong> — 10 août 2025</p>
          <a id="event-link-1" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event right">
        <div class="event-content" data-date="2025-07-15">
          <h2 id="event-type-2">Conférence</h2>
          <p id="event-desc-2">Conférence invitée sur les humanités numériques.</p>
          <p id="event-lieu-2"><strong>Lyon</strong> — 15 juillet 2025</p>
          <a id="event-link-2" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event left">
        <div class="event-content" data-date="2025-06-05">
          <h2 id="event-type-3">Séminaire</h2>
          <p id="event-desc-3">Atelier collaboratif sur la pédagogie en ligne.</p>
          <p id="event-lieu-3"><strong>Toulouse</strong> — 5 juin 2025</p>
          <a id="event-link-3" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event right">
        <div class="event-content" data-date="2025-04-20">
          <h2 id="event-type-4">Workshop</h2>
          <p id="event-desc-4">Atelier pratique autour de la création de contenus interactifs.</p>
          <p id="event-lieu-4"><strong>Bordeaux</strong> — 20 avril 2025</p>
          <a id="event-link-4" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event left">
        <div class="event-content" data-date="2025-03-18">
          <h2 id="event-type-5">Colloque</h2>
          <p id="event-desc-5">Présentation des dernières recherches en sciences cognitives.</p>
          <p id="event-lieu-5"><strong>Marseille</strong> — 18 mars 2025</p>
          <a id="event-link-5" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event right">
        <div class="event-content" data-date="2025-02-11">
          <h2 id="event-type-6">Conférence</h2>
          <p id="event-desc-6">Discussion autour des enjeux du numérique à l’université.</p>
          <p id="event-lieu-6"><strong>Strasbourg</strong> — 11 février 2025</p>
          <a id="event-link-6" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event left">
        <div class="event-content" data-date="2024-12-22">
          <h2 id="event-type-7">Séminaire</h2>
          <p id="event-desc-7">Atelier interdisciplinaire sur l’usage des données de recherche.</p>
          <p id="event-lieu-7"><strong>Nantes</strong> — 22 décembre 2024</p>
          <a id="event-link-7" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event right">
        <div class="event-content" data-date="2024-10-03">
          <h2 id="event-type-8">Workshop</h2>
          <p id="event-desc-8">Travaux pratiques sur l’intégration des outils collaboratifs.</p>
          <p id="event-lieu-8"><strong>Grenoble</strong> — 3 octobre 2024</p>
          <a id="event-link-8" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event left">
        <div class="event-content" data-date="2024-07-19">
          <h2 id="event-type-9">Conférence</h2>
          <p id="event-desc-9">Table ronde autour des innovations pédagogiques numériques.</p>
          <p id="event-lieu-9"><strong>Lille</strong> — 19 juillet 2024</p>
          <a id="event-link-9" href="#">Voir l’événement</a>
        </div>
      </div>

      <div class="event right">
        <div class="event-content" data-date="2024-05-01">
          <h2 id="event-type-10">Colloque</h2>
          <p id="event-desc-10">Discussion sur l’avenir des sciences humaines et du numérique.</p>
          <p id="event-lieu-10"><strong>Nice</strong> — 1er mai 2024</p>
          <a id="event-link-10" href="#">Voir l’événement</a>
        </div>
      </div>

    </div>
  </div>

  <!-- Footer dynamique -->
  <div id="footer-placeholder"></div>

  <script>
    // Charger header/footer
    function loadHTML(id, url) {
      fetch(url)
        .then(res => res.text())
        .then(data => document.getElementById(id).innerHTML = data);
    }
    loadHTML('header-placeholder', 'header.html');
    loadHTML('footer-placeholder', 'footer.html');

    // Sticky tools-box
    window.addEventListener('scroll', function() {
      const tools = document.getElementById("tools-box");
      const offset = tools.offsetTop;
      if (window.scrollY > offset - 80) {
        tools.classList.add("sticky");
      } else {
        tools.classList.remove("sticky");
      }
    });

    // Reset filtres
    function resetFilters() {
      document.getElementById("searchInput").value = "";
      document.getElementById("startDate").value = "";
      document.getElementById("endDate").value = "";
      filterEvents();
    }

    // Filtrage et recherche avec highlight
    document.getElementById("searchInput").addEventListener("input", filterEvents);
    document.getElementById("startDate").addEventListener("change", filterEvents);
    document.getElementById("endDate").addEventListener("change", filterEvents);

    function filterEvents() {
      let search = document.getElementById("searchInput").value.toLowerCase();
      let start = document.getElementById("startDate").value;
      let end = document.getElementById("endDate").value;

      document.querySelectorAll(".event-content").forEach(box => {
        let text = box.innerText.toLowerCase();
        let date = box.getAttribute("data-date");
        let visible = true;

        // Vérif dates
        if (start && date < start) visible = false;
        if (end && date > end) visible = false;

        // Vérif recherche
        if (search && !text.includes(search)) visible = false;

        // Appliquer visibilité
        box.parentElement.style.display = visible ? "flex" : "none";

        // Highlight
        let desc = box.querySelector("p");
        desc.innerHTML = desc.innerText.replace(
          new RegExp(search, "gi"),
          match => `<mark>${match}</mark>`
        );
      });
    }
  </script>
</body>
</html>
